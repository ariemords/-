<!DOCTYPE html>
<html lang="he">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>המתרימים שתורמים</title>
<style>
body{
    font-family: Arial;
    margin:0;
    background:#f4f4f4;
    text-align:center;
}
header{
    background:#2c3e50;
    color:white;
    padding:20px;
}
section{
    margin:20px;
}
input,textarea,button{
    display:block;
    margin:10px auto;
    padding:8px;
    width:90%;
    max-width:400px;
}
button{
    background:#2980b9;
    color:white;
    border:none;
    cursor:pointer;
}
button:hover{
    background:#1f6691;
}
.card{
    background:white;
    padding:15px;
    margin:10px auto;
    width:90%;
    max-width:400px;
    border-radius:8px;
    text-align:right;
}
img{
    max-width:100%;
    border-radius:5px;
}
</style>
</head>
<body>

<!-- מסך בית -->
<div id="homeScreen">
    <header>
        <h1>המתרימים שתורמים</h1>
        <p>ספריית חפצים קהילתית</p>
    </header>

    <section>
        <h2>הרשמה</h2>
        <input id="registerName" placeholder="שם משתמש">
        <button onclick="register()">הרשמה</button>
    </section>

    <section>
        <h2>התחברות</h2>
        <input id="loginName" placeholder="שם משתמש">
        <button onclick="login()">התחברות</button>
    </section>
</div>

<!-- מסך פנימי -->
<div id="appScreen" style="display:none;">
    <section>
        <h2>הוספת חפץ</h2>
        <input id="itemName" placeholder="שם חפץ">
        <input type="file" id="itemImage">
        <button onclick="addItem()">הוסף חפץ</button>
    </section>

    <section>
        <h2>חפצים קיימים</h2>
        <button onclick="showItems()">הצג את כל החפצים</button>
        <div id="itemsContainer"></div>
    </section>
</div>

<script>
let currentUser = null;
let items = []; // רשימת חפצים זמנית

function register(){
    const username = document.getElementById("registerName").value.trim();
    if(!username) return alert("אנא הזן שם משתמש");
    alert(`נרשמת בהצלחה כ-${username}`);
}

function login(){
    const username = document.getElementById("loginName").value.trim() || "אורח";
    currentUser = { email: username };
    alert(`התחברת בהצלחה כ-${username}`);

    document.getElementById("homeScreen").style.display = "none";
    document.getElementById("appScreen").style.display = "block";
}

function addItem(){
    if(!currentUser) return alert("אנא התחבר כדי להוסיף חפץ");

    const name = document.getElementById("itemName").value.trim();
    const fileInput = document.getElementById("itemImage");
    const file = fileInput.files[0];

    if(!name) return alert("אנא הזן שם חפץ");

    let imageUrl = "";
    if(file){
        imageUrl = URL.createObjectURL(file);
    }

    items.push({
        name: name,
        user: currentUser.email,
        image: imageUrl
    });

    alert("חפץ נוסף בהצלחה!");
    fileInput.value = "";
    document.getElementById("itemName").value = "";
    loadItems();
}

function loadItems(){
    const container = document.getElementById("itemsContainer");
    if(!currentUser) {
        container.innerHTML = "<p>אנא התחבר כדי לראות את החפצים</p>";
        return;
    }

    if(items.length === 0){
        container.innerHTML = "<p>אין חפצים להצגה</p>";
        return;
    }

    let html = "";
    items.forEach(item => {
        html += `<div class="card">
                    <h3>${item.name}</h3>
                    <p>מעלה על ידי: ${item.user}</p>`;
        if(item.image) html += `<img src="${item.image}">`;
        html += `</div>`;
    });

    container.innerHTML = html;
}

function showItems(){
    if(!currentUser) return alert("אנא התחבר כדי לראות את החפצים");
    loadItems();
}
</script>

</body>
</html>
